var mt=Object.defineProperty,xt=Object.defineProperties;var yt=Object.getOwnPropertyDescriptors;var Ie=Object.getOwnPropertySymbols;var wt=Object.prototype.hasOwnProperty,bt=Object.prototype.propertyIsEnumerable;var Be=(i,e,t)=>e in i?mt(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,I=(i,e)=>{for(var t in e||(e={}))wt.call(e,t)&&Be(i,t,e[t]);if(Ie)for(var t of Ie(e))bt.call(e,t)&&Be(i,t,e[t]);return i},B=(i,e)=>xt(i,yt(e));const St=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}};St();/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Te=window.ShadowRoot&&(window.ShadyCSS===void 0||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Me=Symbol(),Ue=new Map;class it{constructor(e,t){if(this._$cssResult$=!0,t!==Me)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e}get styleSheet(){let e=Ue.get(this.cssText);return Te&&e===void 0&&(Ue.set(this.cssText,e=new CSSStyleSheet),e.replaceSync(this.cssText)),e}toString(){return this.cssText}}const At=i=>new it(typeof i=="string"?i:i+"",Me),$t=(i,...e)=>{const t=i.length===1?i[0]:e.reduce((n,s,r)=>n+(a=>{if(a._$cssResult$===!0)return a.cssText;if(typeof a=="number")return a;throw Error("Value passed to 'css' function must be a 'css' function result: "+a+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+i[r+1],i[0]);return new it(t,Me)},_t=(i,e)=>{Te?i.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet):e.forEach(t=>{const n=document.createElement("style"),s=window.litNonce;s!==void 0&&n.setAttribute("nonce",s),n.textContent=t.cssText,i.appendChild(n)})},Le=Te?i=>i:i=>i instanceof CSSStyleSheet?(e=>{let t="";for(const n of e.cssRules)t+=n.cssText;return At(t)})(i):i;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var me;const Fe=window.trustedTypes,Ct=Fe?Fe.emptyScript:"",He=window.reactiveElementPolyfillSupport,Ae={toAttribute(i,e){switch(e){case Boolean:i=i?Ct:null;break;case Object:case Array:i=i==null?i:JSON.stringify(i)}return i},fromAttribute(i,e){let t=i;switch(e){case Boolean:t=i!==null;break;case Number:t=i===null?null:Number(i);break;case Object:case Array:try{t=JSON.parse(i)}catch{t=null}}return t}},st=(i,e)=>e!==i&&(e==e||i==i),xe={attribute:!0,type:String,converter:Ae,reflect:!1,hasChanged:st};class z extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(e){var t;(t=this.l)!==null&&t!==void 0||(this.l=[]),this.l.push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((t,n)=>{const s=this._$Eh(n,t);s!==void 0&&(this._$Eu.set(s,n),e.push(s))}),e}static createProperty(e,t=xe){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const n=typeof e=="symbol"?Symbol():"__"+e,s=this.getPropertyDescriptor(e,n,t);s!==void 0&&Object.defineProperty(this.prototype,e,s)}}static getPropertyDescriptor(e,t,n){return{get(){return this[t]},set(s){const r=this[e];this[t]=s,this.requestUpdate(e,r,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||xe}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),this.elementProperties=new Map(e.elementProperties),this._$Eu=new Map,this.hasOwnProperty("properties")){const t=this.properties,n=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const s of n)this.createProperty(s,t[s])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const s of n)t.unshift(Le(s))}else e!==void 0&&t.push(Le(e));return t}static _$Eh(e,t){const n=t.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}o(){var e;this._$Ep=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$Em(),this.requestUpdate(),(e=this.constructor.l)===null||e===void 0||e.forEach(t=>t(this))}addController(e){var t,n;((t=this._$Eg)!==null&&t!==void 0?t:this._$Eg=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)===null||n===void 0||n.call(e))}removeController(e){var t;(t=this._$Eg)===null||t===void 0||t.splice(this._$Eg.indexOf(e)>>>0,1)}_$Em(){this.constructor.elementProperties.forEach((e,t)=>{this.hasOwnProperty(t)&&(this._$Et.set(t,this[t]),delete this[t])})}createRenderRoot(){var e;const t=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return _t(t,this.constructor.elementStyles),t}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$Eg)===null||e===void 0||e.forEach(t=>{var n;return(n=t.hostConnected)===null||n===void 0?void 0:n.call(t)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$Eg)===null||e===void 0||e.forEach(t=>{var n;return(n=t.hostDisconnected)===null||n===void 0?void 0:n.call(t)})}attributeChangedCallback(e,t,n){this._$AK(e,n)}_$ES(e,t,n=xe){var s,r;const a=this.constructor._$Eh(e,n);if(a!==void 0&&n.reflect===!0){const f=((r=(s=n.converter)===null||s===void 0?void 0:s.toAttribute)!==null&&r!==void 0?r:Ae.toAttribute)(t,n.type);this._$Ei=e,f==null?this.removeAttribute(a):this.setAttribute(a,f),this._$Ei=null}}_$AK(e,t){var n,s,r;const a=this.constructor,f=a._$Eu.get(e);if(f!==void 0&&this._$Ei!==f){const p=a.getPropertyOptions(f),o=p.converter,h=(r=(s=(n=o)===null||n===void 0?void 0:n.fromAttribute)!==null&&s!==void 0?s:typeof o=="function"?o:null)!==null&&r!==void 0?r:Ae.fromAttribute;this._$Ei=f,this[f]=h(t,p.type),this._$Ei=null}}requestUpdate(e,t,n){let s=!0;e!==void 0&&(((n=n||this.constructor.getPropertyOptions(e)).hasChanged||st)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),n.reflect===!0&&this._$Ei!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,n))):s=!1),!this.isUpdatePending&&s&&(this._$Ep=this._$E_())}async _$E_(){this.isUpdatePending=!0;try{await this._$Ep}catch(t){Promise.reject(t)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Et&&(this._$Et.forEach((s,r)=>this[r]=s),this._$Et=void 0);let t=!1;const n=this._$AL;try{t=this.shouldUpdate(n),t?(this.willUpdate(n),(e=this._$Eg)===null||e===void 0||e.forEach(s=>{var r;return(r=s.hostUpdate)===null||r===void 0?void 0:r.call(s)}),this.update(n)):this._$EU()}catch(s){throw t=!1,this._$EU(),s}t&&this._$AE(n)}willUpdate(e){}_$AE(e){var t;(t=this._$Eg)===null||t===void 0||t.forEach(n=>{var s;return(s=n.hostUpdated)===null||s===void 0?void 0:s.call(n)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ep}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((t,n)=>this._$ES(n,this[n],t)),this._$EC=void 0),this._$EU()}updated(e){}firstUpdated(e){}}z.finalized=!0,z.elementProperties=new Map,z.elementStyles=[],z.shadowRootOptions={mode:"open"},He==null||He({ReactiveElement:z}),((me=globalThis.reactiveElementVersions)!==null&&me!==void 0?me:globalThis.reactiveElementVersions=[]).push("1.3.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var ye;const G=globalThis.trustedTypes,je=G?G.createPolicy("lit-html",{createHTML:i=>i}):void 0,F=`lit$${(Math.random()+"").slice(9)}$`,nt="?"+F,Et=`<${nt}>`,V=document,J=(i="")=>V.createComment(i),Z=i=>i===null||typeof i!="object"&&typeof i!="function",rt=Array.isArray,Pt=i=>{var e;return rt(i)||typeof((e=i)===null||e===void 0?void 0:e[Symbol.iterator])=="function"},K=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Ne=/-->/g,We=/>/g,N=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,ze=/'/g,qe=/"/g,ot=/^(?:script|style|textarea|title)$/i,Ot=i=>(e,...t)=>({_$litType$:i,strings:e,values:t}),O=Ot(1),R=Symbol.for("lit-noChange"),_=Symbol.for("lit-nothing"),Qe=new WeakMap,Tt=(i,e,t)=>{var n,s;const r=(n=t==null?void 0:t.renderBefore)!==null&&n!==void 0?n:e;let a=r._$litPart$;if(a===void 0){const f=(s=t==null?void 0:t.renderBefore)!==null&&s!==void 0?s:null;r._$litPart$=a=new ne(e.insertBefore(J(),f),f,void 0,t!=null?t:{})}return a._$AI(i),a},Q=V.createTreeWalker(V,129,null,!1),Mt=(i,e)=>{const t=i.length-1,n=[];let s,r=e===2?"<svg>":"",a=K;for(let p=0;p<t;p++){const o=i[p];let h,l,d=-1,c=0;for(;c<o.length&&(a.lastIndex=c,l=a.exec(o),l!==null);)c=a.lastIndex,a===K?l[1]==="!--"?a=Ne:l[1]!==void 0?a=We:l[2]!==void 0?(ot.test(l[2])&&(s=RegExp("</"+l[2],"g")),a=N):l[3]!==void 0&&(a=N):a===N?l[0]===">"?(a=s!=null?s:K,d=-1):l[1]===void 0?d=-2:(d=a.lastIndex-l[2].length,h=l[1],a=l[3]===void 0?N:l[3]==='"'?qe:ze):a===qe||a===ze?a=N:a===Ne||a===We?a=K:(a=N,s=void 0);const x=a===N&&i[p+1].startsWith("/>")?" ":"";r+=a===K?o+Et:d>=0?(n.push(h),o.slice(0,d)+"$lit$"+o.slice(d)+F+x):o+F+(d===-2?(n.push(void 0),p):x)}const f=r+(i[t]||"<?>")+(e===2?"</svg>":"");if(!Array.isArray(i)||!i.hasOwnProperty("raw"))throw Error("invalid template strings array");return[je!==void 0?je.createHTML(f):f,n]};class ee{constructor({strings:e,_$litType$:t},n){let s;this.parts=[];let r=0,a=0;const f=e.length-1,p=this.parts,[o,h]=Mt(e,t);if(this.el=ee.createElement(o,n),Q.currentNode=this.el.content,t===2){const l=this.el.content,d=l.firstChild;d.remove(),l.append(...d.childNodes)}for(;(s=Q.nextNode())!==null&&p.length<f;){if(s.nodeType===1){if(s.hasAttributes()){const l=[];for(const d of s.getAttributeNames())if(d.endsWith("$lit$")||d.startsWith(F)){const c=h[a++];if(l.push(d),c!==void 0){const x=s.getAttribute(c.toLowerCase()+"$lit$").split(F),g=/([.?@])?(.*)/.exec(c);p.push({type:1,index:r,name:g[2],strings:x,ctor:g[1]==="."?Rt:g[1]==="?"?It:g[1]==="@"?Bt:fe})}else p.push({type:6,index:r})}for(const d of l)s.removeAttribute(d)}if(ot.test(s.tagName)){const l=s.textContent.split(F),d=l.length-1;if(d>0){s.textContent=G?G.emptyScript:"";for(let c=0;c<d;c++)s.append(l[c],J()),Q.nextNode(),p.push({type:2,index:++r});s.append(l[d],J())}}}else if(s.nodeType===8)if(s.data===nt)p.push({type:2,index:r});else{let l=-1;for(;(l=s.data.indexOf(F,l+1))!==-1;)p.push({type:7,index:r}),l+=F.length-1}r++}}static createElement(e,t){const n=V.createElement("template");return n.innerHTML=e,n}}function Y(i,e,t=i,n){var s,r,a,f;if(e===R)return e;let p=n!==void 0?(s=t._$Cl)===null||s===void 0?void 0:s[n]:t._$Cu;const o=Z(e)?void 0:e._$litDirective$;return(p==null?void 0:p.constructor)!==o&&((r=p==null?void 0:p._$AO)===null||r===void 0||r.call(p,!1),o===void 0?p=void 0:(p=new o(i),p._$AT(i,t,n)),n!==void 0?((a=(f=t)._$Cl)!==null&&a!==void 0?a:f._$Cl=[])[n]=p:t._$Cu=p),p!==void 0&&(e=Y(i,p._$AS(i,e.values),p,n)),e}class Dt{constructor(e,t){this.v=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(e){var t;const{el:{content:n},parts:s}=this._$AD,r=((t=e==null?void 0:e.creationScope)!==null&&t!==void 0?t:V).importNode(n,!0);Q.currentNode=r;let a=Q.nextNode(),f=0,p=0,o=s[0];for(;o!==void 0;){if(f===o.index){let h;o.type===2?h=new ne(a,a.nextSibling,this,e):o.type===1?h=new o.ctor(a,o.name,o.strings,this,e):o.type===6&&(h=new Ut(a,this,e)),this.v.push(h),o=s[++p]}f!==(o==null?void 0:o.index)&&(a=Q.nextNode(),f++)}return r}m(e){let t=0;for(const n of this.v)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,t),t+=n.strings.length-2):n._$AI(e[t])),t++}}class ne{constructor(e,t,n,s){var r;this.type=2,this._$AH=_,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=n,this.options=s,this._$Cg=(r=s==null?void 0:s.isConnected)===null||r===void 0||r}get _$AU(){var e,t;return(t=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&t!==void 0?t:this._$Cg}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&e.nodeType===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=Y(this,e,t),Z(e)?e===_||e==null||e===""?(this._$AH!==_&&this._$AR(),this._$AH=_):e!==this._$AH&&e!==R&&this.$(e):e._$litType$!==void 0?this.T(e):e.nodeType!==void 0?this.k(e):Pt(e)?this.S(e):this.$(e)}M(e,t=this._$AB){return this._$AA.parentNode.insertBefore(e,t)}k(e){this._$AH!==e&&(this._$AR(),this._$AH=this.M(e))}$(e){this._$AH!==_&&Z(this._$AH)?this._$AA.nextSibling.data=e:this.k(V.createTextNode(e)),this._$AH=e}T(e){var t;const{values:n,_$litType$:s}=e,r=typeof s=="number"?this._$AC(e):(s.el===void 0&&(s.el=ee.createElement(s.h,this.options)),s);if(((t=this._$AH)===null||t===void 0?void 0:t._$AD)===r)this._$AH.m(n);else{const a=new Dt(r,this),f=a.p(this.options);a.m(n),this.k(f),this._$AH=a}}_$AC(e){let t=Qe.get(e.strings);return t===void 0&&Qe.set(e.strings,t=new ee(e)),t}S(e){rt(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let n,s=0;for(const r of e)s===t.length?t.push(n=new ne(this.M(J()),this.M(J()),this,this.options)):n=t[s],n._$AI(r),s++;s<t.length&&(this._$AR(n&&n._$AB.nextSibling,s),t.length=s)}_$AR(e=this._$AA.nextSibling,t){var n;for((n=this._$AP)===null||n===void 0||n.call(this,!1,!0,t);e&&e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var t;this._$AM===void 0&&(this._$Cg=e,(t=this._$AP)===null||t===void 0||t.call(this,e))}}class fe{constructor(e,t,n,s,r){this.type=1,this._$AH=_,this._$AN=void 0,this.element=e,this.name=t,this._$AM=s,this.options=r,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=_}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,n,s){const r=this.strings;let a=!1;if(r===void 0)e=Y(this,e,t,0),a=!Z(e)||e!==this._$AH&&e!==R,a&&(this._$AH=e);else{const f=e;let p,o;for(e=r[0],p=0;p<r.length-1;p++)o=Y(this,f[n+p],t,p),o===R&&(o=this._$AH[p]),a||(a=!Z(o)||o!==this._$AH[p]),o===_?e=_:e!==_&&(e+=(o!=null?o:"")+r[p+1]),this._$AH[p]=o}a&&!s&&this.C(e)}C(e){e===_?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e!=null?e:"")}}class Rt extends fe{constructor(){super(...arguments),this.type=3}C(e){this.element[this.name]=e===_?void 0:e}}const kt=G?G.emptyScript:"";class It extends fe{constructor(){super(...arguments),this.type=4}C(e){e&&e!==_?this.element.setAttribute(this.name,kt):this.element.removeAttribute(this.name)}}class Bt extends fe{constructor(e,t,n,s,r){super(e,t,n,s,r),this.type=5}_$AI(e,t=this){var n;if((e=(n=Y(this,e,t,0))!==null&&n!==void 0?n:_)===R)return;const s=this._$AH,r=e===_&&s!==_||e.capture!==s.capture||e.once!==s.once||e.passive!==s.passive,a=e!==_&&(s===_||r);r&&this.element.removeEventListener(this.name,this,s),a&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,n;typeof this._$AH=="function"?this._$AH.call((n=(t=this.options)===null||t===void 0?void 0:t.host)!==null&&n!==void 0?n:this.element,e):this._$AH.handleEvent(e)}}class Ut{constructor(e,t,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){Y(this,e)}}const Ge=window.litHtmlPolyfillSupport;Ge==null||Ge(ee,ne),((ye=globalThis.litHtmlVersions)!==null&&ye!==void 0?ye:globalThis.litHtmlVersions=[]).push("2.2.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var we,be;class M extends z{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var e,t;const n=super.createRenderRoot();return(e=(t=this.renderOptions).renderBefore)!==null&&e!==void 0||(t.renderBefore=n.firstChild),n}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Dt=Tt(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Dt)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Dt)===null||e===void 0||e.setConnected(!1)}render(){return R}}M.finalized=!0,M._$litElement$=!0,(we=globalThis.litElementHydrateSupport)===null||we===void 0||we.call(globalThis,{LitElement:M});const Ve=globalThis.litElementPolyfillSupport;Ve==null||Ve({LitElement:M});((be=globalThis.litElementVersions)!==null&&be!==void 0?be:globalThis.litElementVersions=[]).push("3.2.0");const j=i=>class extends i{constructor(){super(),this._observers=[]}update(e){$e.start(),super.update(e),this._initStateObservers()}connectedCallback(){super.connectedCallback(),this._wasConnected&&(this.requestUpdate(),delete this._wasConnected)}disconnectedCallback(){super.disconnectedCallback(),this._wasConnected=!0,this._clearStateObservers()}_initStateObservers(){this._clearStateObservers(),this.isConnected&&this._addStateObservers($e.finish())}_addStateObservers(e){for(let[t,n]of e){const s=()=>this.requestUpdate();this._observers.push([t,s]),t.addObserver(s,n)}}_clearStateObservers(){for(let[e,t]of this._observers)e.removeObserver(t);this._observers=[]}};class Lt{constructor(){this._observers=[],this._initStateVars()}addObserver(e,t){this._observers.push({observer:e,keys:t})}removeObserver(e){this._observers=this._observers.filter(t=>t.observer!==e)}_initStateVars(){if(this.constructor.stateVarOptions)for(let[e,t]of Object.entries(this.constructor.stateVarOptions))this._initStateVar(e,t);if(this.constructor.stateVars)for(let[e,t]of Object.entries(this.constructor.stateVars))this._initStateVar(e,{}),this[e]=t}_initStateVar(e,t){if(this.hasOwnProperty(e))return;t=this._parseOptions(t);const n=new t.handler({options:t,recordRead:()=>this._recordRead(e),notifyChange:()=>this._notifyChange(e)});Object.defineProperty(this,e,{get(){return n.get()},set(s){n.shouldSetValue(s)&&n.set(s)},configurable:!0,enumerable:!0})}_parseOptions(e){return e.handler?e.propertyMethod&&e.propertyMethod.kind==="method"&&Object.assign(e,e.propertyMethod.descriptor.value.call(this)):e.handler=Ft,e}_recordRead(e){$e.recordRead(this,e)}_notifyChange(e){for(const t of this._observers)(!t.keys||t.keys.includes(e))&&t.observer(e)}}class Ft{constructor(e){this.options=e.options,this.recordRead=e.recordRead,this.notifyChange=e.notifyChange,this.value=void 0}get(){return this.recordRead(),this.value}shouldSetValue(e){return this.value!==e}set(e){this.value=e,this.notifyChange()}}class Ht{constructor(){this._log=null}start(){this._log=new Map}recordRead(e,t){if(this._log===null)return;const n=this._log.get(e)||[];n.includes(t)||n.push(t),this._log.set(e,n)}finish(){const e=this._log;return this._log=null,e}}const $e=new Ht;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const U=i=>e=>typeof e=="function"?((t,n)=>(window.customElements.define(t,n),n))(i,e):((t,n)=>{const{kind:s,elements:r}=n;return{kind:s,elements:r,finisher(a){window.customElements.define(t,a)}}})(i,e);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const jt=(i,e)=>e.kind==="method"&&e.descriptor&&!("value"in e.descriptor)?B(I({},e),{finisher(t){t.createProperty(e.key,i)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){typeof e.initializer=="function"&&(this[e.key]=e.initializer.call(this))},finisher(t){t.createProperty(e.key,i)}};function ge(i){return(e,t)=>t!==void 0?((n,s,r)=>{s.constructor.createProperty(r,n)})(i,e,t):jt(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function at(i){return ge(B(I({},i),{state:!0}))}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Nt=({finisher:i,descriptor:e})=>(t,n)=>{var s;if(n===void 0){const r=(s=t.originalKey)!==null&&s!==void 0?s:t.key,a=e!=null?{kind:"method",placement:"prototype",key:r,descriptor:e(t.key)}:B(I({},t),{key:r});return i!=null&&(a.finisher=function(f){i(f,r)}),a}{const r=t.constructor;e!==void 0&&Object.defineProperty(t,n,e(n)),i==null||i(r,n)}};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function ht(i,e){return Nt({descriptor:t=>{const n={get(){var s,r;return(r=(s=this.renderRoot)===null||s===void 0?void 0:s.querySelector(i))!==null&&r!==void 0?r:null},enumerable:!0,configurable:!0};if(e){const s=typeof t=="symbol"?Symbol():"__"+t;n.get=function(){var r,a;return this[s]===void 0&&(this[s]=(a=(r=this.renderRoot)===null||r===void 0?void 0:r.querySelector(i))!==null&&a!==void 0?a:null),this[s]}}return n}})}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Se;((Se=window.HTMLSlotElement)===null||Se===void 0?void 0:Se.prototype.assignedElements)!=null;function te([i,e,t]){return`#${i.toString(16)}${e.toString(16)}${t.toString(16)}`}function Ye(i){return[Number.parseInt(i.substring(1,3),16),Number.parseInt(i.substring(3,5),16),Number.parseInt(i.substring(5,7),16)]}function q(i,e,t){return[i[0]*t+e[0]*(1-t),i[1]*t+e[1]*(1-t),i[2]*t+e[2]*(1-t)]}function Wt(i,e){return i[0]===e[0]&&i[1]===e[1]&&i[2]===e[2]}const E=class{constructor(i,e){this.x=i,this.y=e}distance(i){return Math.sqrt((this.x-i.x)**2+(this.y-i.y)**2)}distanceSq(i){return(this.x-i.x)**2+(this.y-i.y)**2}magnitude(){return this.distance(E.zero)}add(i){return new E(this.x+i.x,this.y+i.y)}sub(i){return new E(this.x-i.x,this.y-i.y)}div(i){return new E(this.x/i,this.y/i)}mul(i){return new E(this.x*i,this.y*i)}eq(i){return this.x===i.x&&this.y===i.y}neg(){return new E(-this.x,-this.y)}negX(){return new E(-this.x,this.y)}negY(){return new E(this.x,-this.y)}dot(i){return this.x*i.x+this.y*i.y}round(){return new E(Math.round(this.x),Math.round(this.y))}static average(...i){return i.reduce((e,t)=>new E(e.x+t.x,e.y+t.y)).div(i.length)}toString(){return`Point(${this.x}, ${this.y})`}};let u=E;u.zero=new E(0,0);u.one=new E(1,1);class re{constructor(e){this.id=e,this.color=[0,0,0],this.thickness=1,this.canBeClippedWith=!1}}re.runtimeType="Shape";const _e=class extends re{constructor(i,e){super(`Line#${_e.num++}`),this.p1=i,this.p2=e}addPoint(i){if(this.p1!==void 0&&this.p2!==void 0)throw new Error("Cannot add a point after the line was created");return this.p1?this.p2||(this.p2=i):this.p1=i,this.p2!==void 0}draw(i,e){if(e){this.antiAliasDraw(i);return}if(this.p1===void 0||this.p2===void 0)return;if(Math.abs((this.p2.y-this.p1.y)/(this.p2.x-this.p1.x))>1){const[n,s]=this.p1.y<this.p2.y?[this.p1,this.p2]:[this.p2,this.p1],r=s.sub(n),a=2*r.x,f=2*(r.x-r.y),p=2*(r.x+r.y);let o=n,h=s;if(n.x<s.x){const l=new u(1,0),d=l.neg();let c=2*r.x-r.y;do i.setThick(o,this.color,this.thickness),i.setThick(h,this.color,this.thickness),o=o.add(new u(0,1)),h=h.add(new u(0,-1)),c<0?c+=a:(c+=f,o=o.add(l),h=h.add(d));while(o.y<=h.y)}else{const l=new u(-1,0),d=l.neg();let c=2*r.x+r.y;do i.setThick(o,this.color,this.thickness),i.setThick(h,this.color,this.thickness),o=o.add(new u(0,1)),h=h.add(new u(0,-1)),c<0?(c+=p,o=o.add(l),h=h.add(d)):c+=a;while(o.y<=h.y)}}else{const[n,s]=this.p1.x<this.p2.x?[this.p1,this.p2]:[this.p2,this.p1],r=s.sub(n),a=2*r.y,f=2*(r.y-r.x),p=2*(r.y+r.x);let o=n,h=s;if(n.y<s.y){const l=new u(0,1),d=l.neg();let c=2*r.y-r.x;do i.setThick(o,this.color,this.thickness),i.setThick(h,this.color,this.thickness),o=o.add(new u(1,0)),h=h.add(new u(-1,0)),c<0?c+=a:(c+=f,o=o.add(l),h=h.add(d));while(o.x<=h.x)}else{const l=new u(0,-1),d=l.neg();let c=2*r.y+r.x;do i.setThick(o,this.color,this.thickness),i.setThick(h,this.color,this.thickness),o=o.add(new u(1,0)),h=h.add(new u(-1,0)),c<0?(c+=p,o=o.add(l),h=h.add(d)):c+=a;while(o.x<=h.x)}}}antiAliasDraw(i){if(this.p1===void 0||this.p2===void 0)return;if(Math.abs((this.p2.y-this.p1.y)/(this.p2.x-this.p1.x))>1){const[t,n]=this.p1.y<this.p2.y?[this.p1,this.p2]:[this.p2,this.p1],s=(n.x-t.x)/(n.y-t.y);let r=t.x;for(let a=t.y;a<=n.y;a++){const f=Math.floor(r),p=r-f,o=i.get(new u(f,a));i.set(new u(f,a),q(this.color,o,1-p)),i.set(new u(f+1,a),q(this.color,o,p)),r+=s}}else{const[t,n]=this.p1.x<this.p2.x?[this.p1,this.p2]:[this.p2,this.p1],s=(n.y-t.y)/(n.x-t.x);let r=t.y;for(let a=t.x;a<=n.x;a++){const f=Math.floor(r),p=r-f,o=i.get(new u(a,f));i.set(new u(a,f),q(this.color,o,1-p)),i.set(new u(a,f+1),q(this.color,o,p)),r+=s}}}ctxDraw(i){this.p1===void 0||this.p2===void 0||(i.strokeStyle=te(this.color),i.lineWidth=this.thickness,i.beginPath(),i.moveTo(this.p1.x,this.p1.y),i.lineTo(this.p2.x,this.p2.y),i.stroke())}move(i,e){if(this.p1===void 0||this.p2===void 0)return;const t=i.distanceSq(this.p1),n=i.distanceSq(this.p2),s=i.distanceSq(u.average(this.p1,this.p2)),r=Math.min(t,n,s);(r===t||r===s)&&(this.p1=this.p1.add(e)),(r===n||r===s)&&(this.p2=this.p2.add(e))}serialize(){return B(I({},this),{runtimeType:_e.runtimeType})}deserialize(i){Object.assign(this,i),this.p1=Object.create(u.prototype),Object.assign(this.p1,i.p1),this.p2=Object.create(u.prototype),Object.assign(this.p2,i.p2)}};let P=_e;P.closeThreshold=10;P.num=1;P.runtimeType="Line";const Ce=class extends re{constructor(){super(`Capsule#${Ce.num++}`),this.c1=void 0,this.c2=void 0,this.radius=void 0}addPoint(i){if(this.radius!==void 0)throw new Error("Cannot add a point after the capsule was finished");return this.c1===void 0?this.c1=i:this.c2===void 0?this.c2=i:this.radius===void 0&&(this.radius=this.c2.distance(i)),this.radius!==void 0}draw(i,e){if(e){this.antiAliasDraw(i);return}if(this.c1===void 0||this.c2===void 0||this.radius===void 0)return;const t=Math.round(this.radius),n=new u(this.c2.x-this.c1.x,this.c2.y-this.c1.y),s=new u(n.y,-n.x),r=s.div(s.magnitude()).mul(this.radius).round(),a=this.c1.add(r),f=this.c1.sub(r),p=this.c2.add(r),o=this.c2.sub(r),h=new P(a,p);h.color=this.color,h.thickness=this.thickness;const l=new P(f,o);l.color=this.color,l.thickness=this.thickness,h.draw(i,e),l.draw(i,e),this.drawSemi(i,a,f,-1,t),this.drawSemi(i,p,o,1,t)}antiAliasDraw(i){throw new Error("unimplemented")}drawSemi(i,e,t,n,s){let r=3,a=5-2*s,f=1-s,p=new u(0,s),o=u.average(e,t);do this.mirrorDraw(i,o,e,t,n,p,this.color),f<0?(f+=r,r+=2,a+=2):(f+=a,r+=2,a+=4,p=p.add(new u(0,-1))),p=p.add(new u(1,0));while(p.y>=p.x)}mirrorDraw(i,e,t,n,s,r,a){function f(o,h){Math.sign((t.x-n.x)*(o.y-n.y)-(t.y-n.y)*(o.x-n.x))===s&&h()}let p=[e.add(r),e.add(r.neg()),e.add(r.negX()),e.add(r.negY()),e.add(new u(r.y,r.x)),e.add(new u(-r.y,r.x)),e.add(new u(r.y,-r.x)),e.add(new u(-r.y,-r.x))];for(const o of p)f(o,()=>i.setThick(o,a,this.thickness))}ctxDraw(i){throw new Error("unimplemented")}move(i,e){throw new Error("unimplemented")}serialize(){return B(I({},this),{runtimeType:Ce.runtimeType})}deserialize(i){Object.assign(this,i),this.c1=Object.create(u.prototype),this.c2=Object.create(u.prototype),Object.assign(this.c1,i.c1),Object.assign(this.c2,i.c2)}};let ie=Ce;ie.num=1;ie.runtimeType="Capsule";const Ee=class extends re{constructor(){super(`Circle#${Ee.num++}`),this.center=void 0,this.radius=void 0}addPoint(i){if(this.radius!==void 0)throw new Error("Cannot add a point after the circle was finished");return this.center===void 0?this.center=i:this.radius===void 0&&(this.radius=this.center.distance(i)),this.radius!==void 0}draw(i,e){if(e){this.antiAliasDraw(i);return}if(this.center===void 0||this.radius===void 0)return;const t=Math.round(this.radius);let n=3,s=5-2*t,r=1-t,a=new u(0,t);do this.mirrorDraw(i,this.center,a,this.color),r<0?(r+=n,n+=2,s+=2):(r+=s,n+=2,s+=4,a=a.add(new u(0,-1))),a=a.add(new u(1,0));while(a.y>=a.x)}antiAliasDraw(i){if(this.center===void 0||this.radius===void 0)return;let e=Math.round(this.radius),t=0;for(this.mirrorDraw(i,this.center,new u(e,t),this.color);e>=t;){t+=1;const n=Math.sqrt(this.radius*this.radius-t*t);e=Math.ceil(n);const s=i.get(new u(e,t)),r=e-n;this.mirrorDraw(i,this.center,new u(e,t),q(this.color,s,1-r)),this.mirrorDraw(i,this.center,new u(e-1,t),q(this.color,s,r))}}mirrorDraw(i,e,t,n){i.setThick(e.add(t),n,this.thickness),i.setThick(e.add(t.neg()),n,this.thickness),i.setThick(e.add(t.negX()),n,this.thickness),i.setThick(e.add(t.negY()),n,this.thickness),i.setThick(e.add(new u(t.y,t.x)),n,this.thickness),i.setThick(e.add(new u(-t.y,t.x)),n,this.thickness),i.setThick(e.add(new u(t.y,-t.x)),n,this.thickness),i.setThick(e.add(new u(-t.y,-t.x)),n,this.thickness)}ctxDraw(i){this.center===void 0||this.radius===void 0||(i.strokeStyle=te(this.color),i.lineWidth=this.thickness,i.beginPath(),i.arc(this.center.x,this.center.y,this.radius,0,Math.PI*2),i.stroke())}move(i,e){if(this.center===void 0||this.radius===void 0)return;if(this.center.distance(i)<this.radius/2)this.center=this.center.add(e);else{const n=i.sub(this.center);n.dot(e)/(n.magnitude()*e.magnitude())>=0?this.radius+=e.magnitude():this.radius-=e.magnitude()}}serialize(){return B(I({},this),{runtimeType:Ee.runtimeType})}deserialize(i){Object.assign(this,i),this.center=Object.create(u.prototype),Object.assign(this.center,i.center)}};let X=Ee;X.num=1;X.runtimeType="Circle";const ce=class extends re{constructor(i){super(i!=null?i:`Polygon#${ce.num++}`),this.points=[],this.isClosed=!1}addPoint(i){if(this.isClosed)throw new Error("Cannot add a point after the polygon was closed");return this.points.length===0?this.points.push(i):this.points.length>=3&&this.points[0].distance(i)<ce.closeThreshold?this.isClosed=!0:this.points.push(i),this.isClosed}draw(i,e,t){let n=this.points.map((s,r)=>{const a=new P(s,this.points[(r+1)%this.points.length]);return a.color=this.color,a.thickness=this.thickness,a});this.isClosed||(n=n.slice(0,-1));for(const s of n)if(t&&this!==t){let r=zt(s.p1,s.p2,t);if(r){let a=new P(s.p1,r[0]);a.color=[255,0,0],a.thickness=this.thickness;let f=new P(r[0],r[1]);f.color=[0,255,0],f.thickness=this.thickness;let p=new P(r[1],s.p2);p.color=[255,0,0],p.thickness=this.thickness,a.draw(i,e),p.draw(i,e),f.draw(i,e)}else s.draw(i,e)}else s.draw(i,e);(this.fillColor||this.fillImage)&&this.fill(i)}ctxDraw(i){if(this.points.length!==0){i.strokeStyle=te(this.color),i.lineWidth=this.thickness,i.beginPath(),i.moveTo(this.points[0].x,this.points[0].y);for(let e=1;e<this.points.length;e++){const{x:t,y:n}=this.points[e];i.lineTo(t,n)}this.isClosed&&i.closePath(),i.stroke()}}move(i,e){const t={center:u.average(...this.points),vertices:this.points,edges:this.points.map((r,a)=>u.average(r,this.points[(a+1)%this.points.length]))},n={center:t.center.distanceSq(i),vertices:t.vertices.map(r=>r.distanceSq(i)),edges:t.edges.map(r=>r.distanceSq(i))},s=Math.min(n.center,...n.vertices,...n.edges);if(s===n.center){this.points=this.points.map(r=>r.add(e));return}for(let r=0;r<n.vertices.length;r++)if(s===n.vertices[r]){this.points[r]=this.points[r].add(e);return}for(let r=0;r<n.edges.length;r++)if(s===n.edges[r]){this.points[r]=this.points[r].add(e),this.points[(r+1)%this.points.length]=this.points[(r+1)%this.points.length].add(e);return}}createEdgeTable(){const i=new Map;for(let e=0;e<this.points.length;e++){const t=this.points[e].x,n=this.points[e].y,s=e===this.points.length-1?this.points[0].x:this.points[e+1].x,r=e===this.points.length-1?this.points[0].y:this.points[e+1].y,a=s-t,f=r-n;if(f==0)continue;const p={yMax:Math.max(n,r),slopeInv:a/f,xOfYMin:n<r?t:s},o=Math.min(n,r);i.has(o)?i.get(o).push(p):i.set(o,[p])}return new Map([...i.entries()].sort((e,t)=>e[0]-t[0]))}fill(i){const e=this.createEdgeTable();if(e.size===0)return;let t=e.keys().next().value,n=[];for(;n.length!=0||e.size!=0;){e.has(t)&&(n.push(...e.get(t)),e.delete(t)),n=n.sort((s,r)=>s.xOfYMin-r.xOfYMin);for(let s=0;s<n.length;s+=2){const r=Math.round(n[s].xOfYMin),a=Math.round(n[s+1].xOfYMin);this.fillBetween(i,r,a,t)}t+=1,n=n.filter(s=>s.yMax>t);for(const s of n)s.xOfYMin+=s.slopeInv}}fillBetween(i,e,t,n){if(this.fillImage)for(let s=e;s<t;s++)i.set(new u(s,n),this.fillImage.get(new u(s%i.width,n%i.height)));else if(this.fillColor)for(let s=e;s<t;s++)i.set(new u(s,n),this.fillColor)}serialize(){return B(I({},this),{runtimeType:ce.runtimeType})}deserialize(i){Object.assign(this,i),this.points=i.points.map(e=>{const t=Object.create(u.prototype);return Object.assign(t,e),t})}};let H=ce;H.closeThreshold=10;H.num=1;H.runtimeType="Polygon";function le(i,e,t,n){if(i===0)return e<0?[!1,t,n]:[!0,t,n];const s=e/i;return i>0?s<n&&(n=s):s>t&&(t=s),[!0,t,n]}function zt(i,e,t){let n=e.x-i.x,s=e.y-i.y,r=0,a=1,f=!1;if([f,r,a]=le(-n,i.x-t.left,r,a),f&&([f,r,a]=le(n,t.right-i.x,r,a),f&&([f,r,a]=le(-s,i.y-t.bottom,r,a),f&&([f,r,a]=le(s,t.top-i.y,r,a),f&&r<=a)))){let p=new u(i.x+Math.floor(r*n),i.y+Math.floor(r*s)),o=new u(i.x+Math.floor(a*n),i.y+Math.floor(a*s));return[p,o]}}const Pe=class extends H{constructor(i,e){super(`Rectangle#${Pe.myNum++}`),this.canBeClippedWith=!0,i&&this.addPoint(i),e&&this.addPoint(e)}get left(){return Math.min(...this.points.map(i=>i.x))}get right(){return Math.max(...this.points.map(i=>i.x))}get top(){return Math.max(...this.points.map(i=>i.y))}get bottom(){return Math.min(...this.points.map(i=>i.y))}addPoint(i){let e;if(this.points.length===0)e=i;else if(this.points.length===1){const t=this.points[0],n=i,s=new u(n.x,t.y),r=new u(t.x,n.y);this.points.push(s,n,r),e=t}return super.addPoint(e)}move(i,e){const t={center:u.average(...this.points),vertices:this.points,edges:this.points.map((r,a)=>u.average(r,this.points[(a+1)%this.points.length]))},n={center:t.center.distanceSq(i),vertices:t.vertices.map(r=>r.distanceSq(i)),edges:t.edges.map(r=>r.distanceSq(i))},s=Math.min(n.center,...n.vertices,...n.edges);if(s===n.center){this.points=this.points.map(r=>r.add(e));return}for(let r=0;r<n.vertices.length;r++)if(s===n.vertices[r]){this.points[r]=this.points[r].add(e);const a=(r+3)%4,f=(r+1)%4;r%2?(this.points[f]=new u(this.points[r].x,this.points[f].y),this.points[a]=new u(this.points[a].x,this.points[r].y)):(this.points[a]=new u(this.points[r].x,this.points[a].y),this.points[f]=new u(this.points[f].x,this.points[r].y));return}for(let r=0;r<n.edges.length;r++)if(s===n.edges[r]){const a=(r+1)%this.points.length,f=this.points[r].y===this.points[a].y;let p;f?p=new u(0,e.y):p=new u(e.x,0),this.points[r]=this.points[r].add(p),this.points[a]=this.points[a].add(p);return}}serialize(){return B(I({},this),{runtimeType:Pe.runtimeType})}deserialize(i){Object.assign(this,i),this.points=i.points.map(e=>{const t=Object.create(u.prototype);return Object.assign(t,e),t})}};let se=Pe;se.myNum=1;se.runtimeType="Rectangle";const lt=class extends Lt{get selectedShape(){return this.shapes.find(i=>i.id===this.selectedShapeId)}get clipWithShape(){return this.shapes.find(i=>i.id===this.clipWithShapeId)}changeSelectedShapeThickness(i){this.selectedShape&&(this.selectedShape.thickness=i,this.shapes=[...this.shapes])}changeSelectedShapeColor(i){this.selectedShape&&(this.selectedShape.color=i,this.shapes=[...this.shapes])}changeSelectedShapeFillColor(i){this.selectedShape&&(this.selectedShape.fillColor=i,this.shapes=[...this.shapes])}changeSelectedShapeFillImage(i){this.selectedShape&&(this.selectedShape.fillImage=i,this.shapes=[...this.shapes])}deleteSelectedShape(){this.shapes=this.shapes.filter(i=>i.id!==this.selectedShapeId),this.selectedShapeId===this.clipWithShapeId&&(this.clipWithShapeId=void 0),this.selectedShapeId=void 0}deleteAllShapes(){this.selectedShapeId=void 0,this.clipWithShapeId=void 0,this.shapes=[]}clipWithSelectedShape(i){this.selectedShape&&(i?this.clipWithShapeId=this.selectedShape.id:this.clipWithShapeId=void 0)}addFillPoint(i){this.fillPoints=[...this.fillPoints,i]}createCurrentShape(){switch(this.shapeMode){case"polygon":return new H;case"line":return new P;case"circle":return new X;case"capsule":return new ie;case"rectangle":return new se}}static stressTest(){const i=new lt,[e,t,n]=[3e3,3e3,3e3];for(let s=0;s<e;s++){const r=new P(new u(C(),C()),new u(C(),C()));i.shapes.push(r)}for(let s=0;s<t;s++){const r=new H,a=new u(C(),C());r.addPoint(a)||r.addPoint(new u(C(),C()))||r.addPoint(new u(C(),C()))||r.addPoint(new u(C(),C()))||r.addPoint(a),i.shapes.push(r)}for(let s=0;s<n;s++){const r=new X;r.addPoint(new u(C(),C())),r.addPoint(new u(C(),C())),i.shapes.push(r)}return i}};let ct=lt;ct.stateVars={shapeMode:"polygon",drawingMethod:"context",antiAlias:!1,shapes:[],selectedShapeId:void 0,clipWithShapeId:void 0,fillPoints:[],isAddingFillPoints:!1};const A=new ct;function C({min:i,max:e}={min:0,max:1e3}){return Math.floor(Math.random()*(e-i+1))+i}var qt=Object.defineProperty,Qt=Object.getOwnPropertyDescriptor,De=(i,e,t,n)=>{for(var s=n>1?void 0:n?Qt(e,t):e,r=i.length-1,a;r>=0;r--)(a=i[r])&&(s=(n?a(e,t,s):a(s))||s);return n&&s&&qt(e,t,s),s};class oe extends M{constructor(){super(...arguments),this.width=400,this.height=400,this.lastRender=0}loop(e){}onTap(e){}onMove(e,t){}render(){return O`
      <canvas id="base" width=${this.width} height=${this.height}></canvas>
    `}firstUpdated(){requestAnimationFrame(t=>this._loop(t)),this.canvas.addEventListener("touchstart",t=>{t.preventDefault();const n=t.touches,s=[];for(let r=0;r<n.length;r++)s.push(this.touchOffset(n[r]));this.onTap(s)},!1),this.canvas.addEventListener("mousedown",t=>{t.preventDefault(),this.onTap([new u(t.offsetX,t.offsetY)])},!1);let e;this.canvas.addEventListener("touchstart",({touches:t})=>{t.length>0&&(e=this.touchOffset(t[0]))}),this.canvas.addEventListener("mousedown",({offsetX:t,offsetY:n})=>{e=new u(t,n)}),this.canvas.addEventListener("mouseup",()=>{e=void 0}),this.canvas.addEventListener("touchend",()=>{e=void 0}),this.canvas.addEventListener("mousemove",({offsetX:t,offsetY:n})=>{if(e===void 0)return;const s=new u(t,n);s.eq(e)||(this.onMove(e,s.sub(e)),e=s)}),this.canvas.addEventListener("touchmove",({touches:t})=>{if(e===void 0||t.length===0)return;const n=this.touchOffset(t[0]);n.eq(e)||(this.onMove(e,n.sub(e)),e=n)})}_loop(e){const t=e-this.lastRender;this.loop(t),this.lastRender=e;const n=this.canvas.getContext("2d");n&&(n.save(),n.clearRect(0,0,this.width,this.height),this.draw(n),n.restore()),requestAnimationFrame(s=>this._loop(s))}touchOffset(e){const{left:t,top:n}=this.canvas.getBoundingClientRect();return new u(e.clientX-t,e.clientY-n)}}De([ht("#base")],oe.prototype,"canvas",2);De([ge({type:Number})],oe.prototype,"width",2);De([ge({type:Number})],oe.prototype,"height",2);const dt=class{constructor(i){this.source=i}get width(){return this.source.width}get height(){return this.source.height}rootIndex(i,e){return(e*this.source.width+i)*4}get(i){const e=this.rootIndex(i.x,i.y);return[this.source.data[e],this.source.data[e+1],this.source.data[e+2]]}set(i,e){if(i.x<0||i.x>=this.source.width)return;const t=this.rootIndex(i.x,i.y);[this.source.data[t],this.source.data[t+1],this.source.data[t+2]]=e}setThick(i,e,t){for(const n of dt.brushes[t])this.set(i.add(n),e)}paintOnto(i){i.putImageData(this.source,0,0)}};let Re=dt;Re.brushes={[1]:[new u(0,0)],[3]:[new u(0,0),new u(0,-1),new u(0,1),new u(1,0),new u(-1,0)],[5]:[new u(0,0),new u(0,-1),new u(0,-2),new u(0,1),new u(0,2),new u(1,0),new u(2,0),new u(-1,0),new u(-2,0),new u(-1,-1),new u(1,1),new u(-1,1),new u(1,-1)],[7]:[new u(0,0),new u(0,-1),new u(0,-2),new u(0,-3),new u(0,1),new u(0,2),new u(0,3),new u(1,0),new u(2,0),new u(3,0),new u(-1,0),new u(-2,0),new u(-3,0),new u(-1,-1),new u(-2,-1),new u(-1,-2),new u(-2,-2),new u(1,1),new u(2,1),new u(1,2),new u(2,2),new u(-1,1),new u(-2,1),new u(-1,2),new u(-2,2),new u(1,-1),new u(2,-1),new u(1,-2),new u(2,-2)]};var Gt=Object.defineProperty,Vt=Object.getOwnPropertyDescriptor,ut=(i,e,t,n)=>{for(var s=n>1?void 0:n?Vt(e,t):e,r=i.length-1,a;r>=0;r--)(a=i[r])&&(s=(n?a(e,t,s):a(s))||s);return n&&s&&Gt(e,t,s),s};let Oe=class extends j(oe){constructor(){super(...arguments),this.fpss=new Array(60).fill(0),this.fpsIndex=0,this.fps=0}firstUpdated(){super.firstUpdated(),A.addObserver(()=>{A.selectedShapeId!==void 0&&(this.active=void 0)},["selectedShapeId"]),A.addObserver(()=>{this.active=void 0},["shapeMode"])}draw(i){switch(i.save(),i.fillStyle="#cccccc",i.fillRect(0,0,this.width,this.height),i.restore(),A.drawingMethod){case"context":for(const t of[...A.shapes,this.active])i.save(),t==null||t.ctxDraw(i),i.restore();break;case"manual":const e=new Re(i.getImageData(0,0,this.canvas.width,this.canvas.height));for(const t of[...A.shapes,this.active])i.save(),t==null||t.draw(e,A.antiAlias,A.clipWithShape),i.restore();for(const t of A.fillPoints)Yt(e,t);e.paintOnto(i);break}}onTap(i){if(super.onTap(i),A.selectedShapeId||i.length===0)return;const e=i[0];if(A.isAddingFillPoints){A.addFillPoint(e);return}this.active||(this.active=A.createCurrentShape()),this.active.addPoint(e)&&(A.shapes=[...A.shapes,this.active],this.active=void 0)}onMove(i,e){var t;(t=A.selectedShape)==null||t.move(i,e)}createRenderRoot(){return this}loop(i){this.fpsIndex===this.fpss.length&&(this.fps=this.fpss.reduce((e,t)=>e+t)/this.fpss.length,this.fpsIndex=0),this.fpss[this.fpsIndex++]=1e3/i}render(){return O`
      ${super.render()}
      <span>fps: ${this.fps.toFixed(1)}</span>
    `}};ut([at()],Oe.prototype,"fps",2);Oe=ut([U("app-canvas")],Oe);function Yt(i,e){const t=i.get(e),n=[255,0,0],s=[e];for(;s.length!==0;){const r=s.pop();if(r.x<0||r.y<0||r.x>=i.width||r.y>=i.height)continue;const a=i.get(r);Wt(t,a)&&(i.set(r,n),s.push(r.add(new u(0,1))),s.push(r.add(new u(1,0))),s.push(r.add(new u(0,-1))),s.push(r.add(new u(-1,0))))}}var Xt=Object.defineProperty,Kt=Object.getOwnPropertyDescriptor,pt=(i,e,t,n)=>{for(var s=n>1?void 0:n?Kt(e,t):e,r=i.length-1,a;r>=0;r--)(a=i[r])&&(s=(n?a(e,t,s):a(s))||s);return n&&s&&Xt(e,t,s),s};let de=class extends oe{constructor(){super(...arguments),this.pixelWindow=20,this.currPos=u.zero}async firstUpdated(){super.firstUpdated(),queueMicrotask(()=>{this.target=this.querySelector("canvas"),this.canvas.getContext("2d").imageSmoothingEnabled=!1,this.target.addEventListener("mousemove",({offsetX:i,offsetY:e})=>{this.currPos=new u(i,e)}),this.target.addEventListener("touchmove",({touches:i})=>{i.length>0&&(this.currPos=this.touchOffset(i[0]))})})}draw(i){i.clearRect(0,0,this.width,this.height),i.drawImage(this.target,Math.min(Math.max(0,this.currPos.x-this.pixelWindow/2),this.target.width-this.pixelWindow),Math.min(Math.max(0,this.currPos.y-this.pixelWindow/2),this.target.height-this.pixelWindow),this.pixelWindow,this.pixelWindow,0,0,this.width,this.height)}render(){return O`
      <slot></slot>
      ${super.render()}
    `}};de.styles=$t`
    :host > canvas {
      border: 1px solid black;
    }
  `;pt([ge({type:Number})],de.prototype,"pixelWindow",2);de=pt([U("canvas-zoom")],de);var Jt=Object.defineProperty,Zt=Object.getOwnPropertyDescriptor,ei=(i,e,t,n)=>{for(var s=n>1?void 0:n?Zt(e,t):e,r=i.length-1,a;r>=0;r--)(a=i[r])&&(s=(n?a(e,t,s):a(s))||s);return n&&s&&Jt(e,t,s),s};let Xe=class extends j(M){render(){return O`
      <div>
        <input
          type="checkbox"
          id="antialias"
          name="antialias"
          @change=${this.onChange}
          ?checked=${A.antiAlias}
        />
        <label for="antialias">Anti-alias</label>
      </div>
    `}onChange(i){A.antiAlias=i.target.checked}};Xe=ei([U("antialias-checkbox")],Xe);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const W={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},ti=i=>(...e)=>({_$litDirective$:i,values:e});class ii{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,n){this._$Ct=e,this._$AM=t,this._$Ci=n}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const si=i=>i.strings===void 0,ni={},ri=(i,e=ni)=>i._$AH=e;/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ue=ti(class extends ii{constructor(i){if(super(i),i.type!==W.PROPERTY&&i.type!==W.ATTRIBUTE&&i.type!==W.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!si(i))throw Error("`live` bindings can only contain a single expression")}render(i){return i}update(i,[e]){if(e===R||e===_)return e;const t=i.element,n=i.name;if(i.type===W.PROPERTY){if(e===t[n])return R}else if(i.type===W.BOOLEAN_ATTRIBUTE){if(!!e===t.hasAttribute(n))return R}else if(i.type===W.ATTRIBUTE&&t.getAttribute(n)===e+"")return R;return ri(i),e}});var oi=Object.defineProperty,ai=Object.getOwnPropertyDescriptor,hi=(i,e,t,n)=>{for(var s=n>1?void 0:n?ai(e,t):e,r=i.length-1,a;r>=0;r--)(a=i[r])&&(s=(n?a(e,t,s):a(s))||s);return n&&s&&oi(e,t,s),s};let Ke=class extends j(M){render(){return O`
      <label for="drawing-mode">Select drawing mode:</label>

      <select name="shapes" id="drawing-mode" @change=${this.onChange}>
        <option
          value="manual"
          .selected=${ue(A.drawingMethod==="manual")}
        >
          Manual
        </option>
        <option
          value="context"
          .selected=${ue(A.drawingMethod==="context")}
        >
          Context
        </option>
      </select>
    `}onChange(i){const t=i.target.selectedOptions[0].value;A.drawingMethod=t}};Ke=hi([U("drawing-mode")],Ke);var li=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},k={exports:{}};(function(i){(function(e){var t=e.URL||e.webkitURL;function n(o){return t?t.createObjectURL(o):!1}function s(o){return t?t.revokeObjectURL(o):!1}function r(o,h){o&&o.slice(0,5)==="blob:"&&!(h&&h.noRevoke)&&s(o)}function a(o,h,l,d){if(!e.FileReader)return!1;var c=new FileReader;c.onload=function(){h.call(c,this.result)},l&&(c.onabort=c.onerror=function(){l.call(c,this.error)});var x=c[d||"readAsDataURL"];if(x)return x.call(c,o),c}function f(o,h){return Object.prototype.toString.call(h)==="[object "+o+"]"}function p(o,h,l){function d(c,x){var g=document.createElement("img"),m;function y(v,S){if(c===x){c&&c(v,S);return}else if(v instanceof Error){x(v);return}S=S||{},S.image=v,c(S)}function b(v,S){S&&e.console&&console.log(S),v&&f("Blob",v)?(o=v,m=n(o)):(m=o,l&&l.crossOrigin&&(g.crossOrigin=l.crossOrigin)),g.src=m}if(g.onerror=function(v){r(m,l),x&&x.call(g,v)},g.onload=function(){r(m,l);var v={originalWidth:g.naturalWidth||g.width,originalHeight:g.naturalHeight||g.height};try{p.transform(g,l,y,o,v)}catch(S){x&&x(S)}},typeof o=="string")return p.requiresMetaData(l)?p.fetchBlob(o,b,l):b(),g;if(f("Blob",o)||f("File",o))return m=n(o),m?(g.src=m,g):a(o,function(v){g.src=v},x)}return e.Promise&&typeof h!="function"?(l=h,new Promise(d)):d(h,h)}p.requiresMetaData=function(o){return o&&o.meta},p.fetchBlob=function(o,h){h()},p.transform=function(o,h,l,d,c){l(o,c)},p.global=e,p.readFile=a,p.isInstanceOf=f,p.createObjectURL=n,p.revokeObjectURL=s,i.exports?i.exports=p:e.loadImage=p})(typeof window!="undefined"&&window||li)})(k);var ft={exports:{}};(function(i){(function(e){i.exports?e(k.exports):e(window.loadImage)})(function(e){var t=e.transform;e.createCanvas=function(n,s,r){if(r&&e.global.OffscreenCanvas)return new OffscreenCanvas(n,s);var a=document.createElement("canvas");return a.width=n,a.height=s,a},e.transform=function(n,s,r,a,f){t.call(e,e.scale(n,s,f),s,r,a,f)},e.transformCoordinates=function(){},e.getTransformedOptions=function(n,s){var r=s.aspectRatio,a,f,p,o;if(!r)return s;a={};for(f in s)Object.prototype.hasOwnProperty.call(s,f)&&(a[f]=s[f]);return a.crop=!0,p=n.naturalWidth||n.width,o=n.naturalHeight||n.height,p/o>r?(a.maxWidth=o*r,a.maxHeight=o):(a.maxWidth=p,a.maxHeight=p/r),a},e.drawImage=function(n,s,r,a,f,p,o,h,l){var d=s.getContext("2d");return l.imageSmoothingEnabled===!1?(d.msImageSmoothingEnabled=!1,d.imageSmoothingEnabled=!1):l.imageSmoothingQuality&&(d.imageSmoothingQuality=l.imageSmoothingQuality),d.drawImage(n,r,a,f,p,0,0,o,h),d},e.requiresCanvas=function(n){return n.canvas||n.crop||!!n.aspectRatio},e.scale=function(n,s,r){s=s||{},r=r||{};var a=n.getContext||e.requiresCanvas(s)&&!!e.global.HTMLCanvasElement,f=n.naturalWidth||n.width,p=n.naturalHeight||n.height,o=f,h=p,l,d,c,x,g,m,y,b,v,S,w,$;function L(){var T=Math.max((c||o)/o,(x||h)/h);T>1&&(o*=T,h*=T)}function D(){var T=Math.min((l||o)/o,(d||h)/h);T<1&&(o*=T,h*=T)}if(a&&(s=e.getTransformedOptions(n,s,r),y=s.left||0,b=s.top||0,s.sourceWidth?(g=s.sourceWidth,s.right!==void 0&&s.left===void 0&&(y=f-g-s.right)):g=f-y-(s.right||0),s.sourceHeight?(m=s.sourceHeight,s.bottom!==void 0&&s.top===void 0&&(b=p-m-s.bottom)):m=p-b-(s.bottom||0),o=g,h=m),l=s.maxWidth,d=s.maxHeight,c=s.minWidth,x=s.minHeight,a&&l&&d&&s.crop?(o=l,h=d,w=g/m-l/d,w<0?(m=d*g/l,s.top===void 0&&s.bottom===void 0&&(b=(p-m)/2)):w>0&&(g=l*m/d,s.left===void 0&&s.right===void 0&&(y=(f-g)/2))):((s.contain||s.cover)&&(c=l=l||c,x=d=d||x),s.cover?(D(),L()):(L(),D())),a){if(v=s.pixelRatio,v>1&&!(n.style.width&&Math.floor(parseFloat(n.style.width,10))===Math.floor(f/v))&&(o*=v,h*=v),e.orientationCropBug&&!n.getContext&&(y||b||g!==f||m!==p)&&(w=n,n=e.createCanvas(f,p,!0),e.drawImage(w,n,0,0,f,p,f,p,s)),S=s.downsamplingRatio,S>0&&S<1&&o<g&&h<m)for(;g*S>o;)$=e.createCanvas(g*S,m*S,!0),e.drawImage(n,$,y,b,g,m,$.width,$.height,s),y=0,b=0,g=$.width,m=$.height,n=$;return $=e.createCanvas(o,h),e.transformCoordinates($,s,r),v>1&&($.style.width=$.width/v+"px"),e.drawImage(n,$,y,b,g,m,o,h,s).setTransform(1,0,0,1,0,0),$}return n.width=o,n.height=h,n}})})(ft);var ve={exports:{}};(function(i){(function(e){i.exports?e(k.exports):e(window.loadImage)})(function(e){var t=e.global,n=e.transform,s=t.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),r=t.ArrayBuffer&&ArrayBuffer.prototype.slice||function(h,l){l=l||this.byteLength-h;var d=new Uint8Array(this,h,l),c=new Uint8Array(l);return c.set(d),c.buffer},a={jpeg:{65505:[],65517:[]}};function f(h,l,d,c){var x=this;function g(m,y){if(!(t.DataView&&s&&h&&h.size>=12&&h.type==="image/jpeg"))return m(c);var b=d.maxMetaDataSize||262144;e.readFile(s.call(h,0,b),function(v){var S=new DataView(v);if(S.getUint16(0)!==65496)return y(new Error("Invalid JPEG file: Missing JPEG marker."));for(var w=2,$=S.byteLength-4,L=w,D,T,ae,he;w<$&&(D=S.getUint16(w),D>=65504&&D<=65519||D===65534);){if(T=S.getUint16(w+2)+2,w+T>S.byteLength){console.log("Invalid JPEG metadata: Invalid segment size.");break}if(ae=a.jpeg[D],ae&&!d.disableMetaDataParsers)for(he=0;he<ae.length;he+=1)ae[he].call(x,S,w,T,c,d);w+=T,L=w}!d.disableImageHead&&L>6&&(c.imageHead=r.call(v,0,L)),m(c)},y,"readAsArrayBuffer")||m(c)}return d=d||{},t.Promise&&typeof l!="function"?(d=l||{},c=d,new Promise(g)):(c=c||{},g(l,l))}function p(h,l,d){return!h||!l||!d?null:new Blob([d,s.call(h,l.byteLength)],{type:"image/jpeg"})}function o(h,l,d){var c={maxMetaDataSize:1024,disableMetaDataParsers:!0};if(!d&&t.Promise)return f(h,c).then(function(x){return p(h,x.imageHead,l)});f(h,function(x){d(p(h,x.imageHead,l))},c)}e.transform=function(h,l,d,c,x){e.requiresMetaData(l)?(x=x||{},f(c,function(g){g!==x&&(t.console&&console.log(g),g=x),n.call(e,h,l,d,c,g)},l,x)):n.apply(e,arguments)},e.blobSlice=s,e.bufferSlice=r,e.replaceHead=o,e.parseMetaData=f,e.metaDataParsers=a})})(ve);var ci={exports:{}};(function(i){(function(e){i.exports?e(k.exports):e(window.loadImage)})(function(e){var t=e.global;t.fetch&&t.Request&&t.Response&&t.Response.prototype.blob?e.fetchBlob=function(n,s,r){function a(f){return f.blob()}if(t.Promise&&typeof s!="function")return fetch(new Request(n,s)).then(a);fetch(new Request(n,r)).then(a).then(s).catch(function(f){s(null,f)})}:t.XMLHttpRequest&&new XMLHttpRequest().responseType===""&&(e.fetchBlob=function(n,s,r){function a(f,p){r=r||{};var o=new XMLHttpRequest;o.open(r.method||"GET",n),r.headers&&Object.keys(r.headers).forEach(function(h){o.setRequestHeader(h,r.headers[h])}),o.withCredentials=r.credentials==="include",o.responseType="blob",o.onload=function(){f(o.response)},o.onerror=o.onabort=o.ontimeout=function(h){f===p?p(null,h):p(h)},o.send(r.body)}return t.Promise&&typeof s!="function"?(r=s,new Promise(a)):a(s,s)})})})(ci);var gt={exports:{}};(function(i){(function(e){i.exports?e(k.exports,ve.exports):e(window.loadImage)})(function(e){function t(o){o&&(Object.defineProperty(this,"map",{value:this.ifds[o].map}),Object.defineProperty(this,"tags",{value:this.tags&&this.tags[o]||{}}))}t.prototype.map={Orientation:274,Thumbnail:"ifd1",Blob:513,Exif:34665,GPSInfo:34853,Interoperability:40965},t.prototype.ifds={ifd1:{name:"Thumbnail",map:t.prototype.map},34665:{name:"Exif",map:{}},34853:{name:"GPSInfo",map:{}},40965:{name:"Interoperability",map:{}}},t.prototype.get=function(o){return this[o]||this[this.map[o]]};function n(o,h,l){if(!!l){if(h+l>o.byteLength){console.log("Invalid Exif data: Invalid thumbnail data.");return}return new Blob([e.bufferSlice.call(o.buffer,h,h+l)],{type:"image/jpeg"})}}var s={1:{getValue:function(o,h){return o.getUint8(h)},size:1},2:{getValue:function(o,h){return String.fromCharCode(o.getUint8(h))},size:1,ascii:!0},3:{getValue:function(o,h,l){return o.getUint16(h,l)},size:2},4:{getValue:function(o,h,l){return o.getUint32(h,l)},size:4},5:{getValue:function(o,h,l){return o.getUint32(h,l)/o.getUint32(h+4,l)},size:8},9:{getValue:function(o,h,l){return o.getInt32(h,l)},size:4},10:{getValue:function(o,h,l){return o.getInt32(h,l)/o.getInt32(h+4,l)},size:8}};s[7]=s[1];function r(o,h,l,d,c,x){var g=s[d],m,y,b,v,S,w;if(!g){console.log("Invalid Exif data: Invalid tag type.");return}if(m=g.size*c,y=m>4?h+o.getUint32(l+8,x):l+8,y+m>o.byteLength){console.log("Invalid Exif data: Invalid data offset.");return}if(c===1)return g.getValue(o,y,x);for(b=[],v=0;v<c;v+=1)b[v]=g.getValue(o,y+v*g.size,x);if(g.ascii){for(S="",v=0;v<b.length&&(w=b[v],w!=="\0");v+=1)S+=w;return S}return b}function a(o,h,l){return(!o||o[l])&&(!h||h[l]!==!0)}function f(o,h,l,d,c,x,g,m){var y,b,v,S,w,$;if(l+6>o.byteLength){console.log("Invalid Exif data: Invalid directory offset.");return}if(y=o.getUint16(l,d),b=l+2+12*y,b+4>o.byteLength){console.log("Invalid Exif data: Invalid directory size.");return}for(v=0;v<y;v+=1)S=l+2+12*v,w=o.getUint16(S,d),a(g,m,w)&&($=r(o,h,S,o.getUint16(S+2,d),o.getUint32(S+4,d),d),c[w]=$,x&&(x[w]=S));return o.getUint32(b,d)}function p(o,h,l,d,c,x,g){var m=o.exif[h];m&&(o.exif[h]=new t(h),o.exifOffsets&&(o.exifOffsets[h]=new t(h)),f(l,d,d+m,c,o.exif[h],o.exifOffsets&&o.exifOffsets[h],x&&x[h],g&&g[h]))}e.parseExifData=function(o,h,l,d,c){if(!c.disableExif){var x=c.includeExifTags,g=c.excludeExifTags||{34665:{37500:!0}},m=h+10,y,b,v;if(o.getUint32(h+4)===1165519206){if(m+8>o.byteLength){console.log("Invalid Exif data: Invalid segment size.");return}if(o.getUint16(h+8)!==0){console.log("Invalid Exif data: Missing byte alignment offset.");return}switch(o.getUint16(m)){case 18761:y=!0;break;case 19789:y=!1;break;default:console.log("Invalid Exif data: Invalid byte alignment marker.");return}if(o.getUint16(m+2,y)!==42){console.log("Invalid Exif data: Missing TIFF marker.");return}b=o.getUint32(m+4,y),d.exif=new t,c.disableExifOffsets||(d.exifOffsets=new t,d.exifTiffOffset=m,d.exifLittleEndian=y),b=f(o,m,m+b,y,d.exif,d.exifOffsets,x,g),b&&a(x,g,"ifd1")&&(d.exif.ifd1=b,d.exifOffsets&&(d.exifOffsets.ifd1=m+b)),Object.keys(d.exif.ifds).forEach(function(S){p(d,S,o,m,y,x,g)}),v=d.exif.ifd1,v&&v[513]&&(v[513]=n(o,m+v[513],v[514]))}}},e.metaDataParsers.jpeg[65505].push(e.parseExifData),e.exifWriters={274:function(o,h,l){var d=h.exifOffsets[274];if(!d)return o;var c=new DataView(o,d+8,2);return c.setUint16(0,l,h.exifLittleEndian),o}},e.writeExifData=function(o,h,l,d){return e.exifWriters[h.exif.map[l]](o,h,d)},e.ExifMap=t})})(gt);var di={exports:{}};(function(i){(function(e){i.exports?e(k.exports,gt.exports):e(window.loadImage)})(function(e){var t=e.ExifMap.prototype;t.tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",34665:{36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",36880:"OffsetTime",36881:"OffsetTimeOriginal",36882:"OffsetTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber"},34853:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},40965:{1:"InteroperabilityIndex"}},t.tags.ifd1=t.tags,t.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"Original",2:"Horizontal flip",3:"Rotate 180\xB0 CCW",4:"Vertical flip",5:"Vertical flip + Rotate 90\xB0 CW",6:"Rotate 90\xB0 CW",7:"Horizontal flip + Rotate 90\xB0 CW",8:"Rotate 90\xB0 CCW"}},t.getText=function(n){var s=this.get(n);switch(n){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[n][s];case"ExifVersion":case"FlashpixVersion":return s?String.fromCharCode(s[0],s[1],s[2],s[3]):void 0;case"ComponentsConfiguration":return s?this.stringValues[n][s[0]]+this.stringValues[n][s[1]]+this.stringValues[n][s[2]]+this.stringValues[n][s[3]]:void 0;case"GPSVersionID":return s?s[0]+"."+s[1]+"."+s[2]+"."+s[3]:void 0}return String(s)},t.getAll=function(){var n={},s,r,a;for(s in this)Object.prototype.hasOwnProperty.call(this,s)&&(r=this[s],r&&r.getAll?n[this.ifds[s].name]=r.getAll():(a=this.tags[s],a&&(n[a]=this.getText(a))));return n},t.getName=function(n){var s=this.tags[n];return typeof s=="object"?this.ifds[n].name:s},function(){var n=t.tags,s,r,a;for(s in n)if(Object.prototype.hasOwnProperty.call(n,s))if(r=t.ifds[s],r){a=n[s];for(s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r.map[a[s]]=Number(s))}else t.map[n[s]]=Number(s)}()})})(di);var vt={exports:{}};(function(i){(function(e){i.exports?e(k.exports,ve.exports):e(window.loadImage)})(function(e){function t(){}t.prototype.map={ObjectName:5},t.prototype.types={0:"Uint16",200:"Uint16",201:"Uint16",202:"binary"},t.prototype.get=function(o){return this[o]||this[this.map[o]]};function n(o,h,l){for(var d="",c=h+l,x=h;x<c;x+=1)d+=String.fromCharCode(o.getUint8(x));return d}function s(o,h,l,d,c){return h.types[o]==="binary"?new Blob([l.buffer.slice(d,d+c)]):h.types[o]==="Uint16"?l.getUint16(d):n(l,d,c)}function r(o,h){return o===void 0?h:o instanceof Array?(o.push(h),o):[o,h]}function a(o,h,l,d,c,x){for(var g,m,y,b=h+l,v=h;v<b;)o.getUint8(v)===28&&o.getUint8(v+1)===2&&(y=o.getUint8(v+2),(!c||c[y])&&(!x||!x[y])&&(m=o.getInt16(v+3),g=s(y,d.iptc,o,v+5,m),d.iptc[y]=r(d.iptc[y],g),d.iptcOffsets&&(d.iptcOffsets[y]=v))),v+=1}function f(o,h){return o.getUint32(h)===943868237&&o.getUint16(h+4)===1028}function p(o,h){var l=o.getUint8(h+7);return l%2!==0&&(l+=1),l===0&&(l=4),l}e.parseIptcData=function(o,h,l,d,c){if(!c.disableIptc)for(var x=h+l;h+8<x;){if(f(o,h)){var g=p(o,h),m=h+8+g;if(m>x){console.log("Invalid IPTC data: Invalid segment offset.");break}var y=o.getUint16(h+6+g);if(h+y>x){console.log("Invalid IPTC data: Invalid segment size.");break}d.iptc=new t,c.disableIptcOffsets||(d.iptcOffsets=new t),a(o,m,y,d,c.includeIptcTags,c.excludeIptcTags||{202:!0});return}h+=1}},e.metaDataParsers.jpeg[65517].push(e.parseIptcData),e.IptcMap=t})})(vt);var ui={exports:{}};(function(i){(function(e){i.exports?e(k.exports,vt.exports):e(window.loadImage)})(function(e){var t=e.IptcMap.prototype;t.tags={0:"ApplicationRecordVersion",3:"ObjectTypeReference",4:"ObjectAttributeReference",5:"ObjectName",7:"EditStatus",8:"EditorialUpdate",10:"Urgency",12:"SubjectReference",15:"Category",20:"SupplementalCategories",22:"FixtureIdentifier",25:"Keywords",26:"ContentLocationCode",27:"ContentLocationName",30:"ReleaseDate",35:"ReleaseTime",37:"ExpirationDate",38:"ExpirationTime",40:"SpecialInstructions",42:"ActionAdvised",45:"ReferenceService",47:"ReferenceDate",50:"ReferenceNumber",55:"DateCreated",60:"TimeCreated",62:"DigitalCreationDate",63:"DigitalCreationTime",65:"OriginatingProgram",70:"ProgramVersion",75:"ObjectCycle",80:"Byline",85:"BylineTitle",90:"City",92:"Sublocation",95:"State",100:"CountryCode",101:"Country",103:"OriginalTransmissionReference",105:"Headline",110:"Credit",115:"Source",116:"CopyrightNotice",118:"Contact",120:"Caption",121:"LocalCaption",122:"Writer",125:"RasterizedCaption",130:"ImageType",131:"ImageOrientation",135:"LanguageIdentifier",150:"AudioType",151:"AudioSamplingRate",152:"AudioSamplingResolution",153:"AudioDuration",154:"AudioOutcue",184:"JobID",185:"MasterDocumentID",186:"ShortDocumentID",187:"UniqueDocumentID",188:"OwnerID",200:"ObjectPreviewFileFormat",201:"ObjectPreviewFileVersion",202:"ObjectPreviewData",221:"Prefs",225:"ClassifyState",228:"SimilarityIndex",230:"DocumentNotes",231:"DocumentHistory",232:"ExifCameraInfo",255:"CatalogSets"},t.stringValues={10:{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"},75:{a:"Morning",b:"Both Morning and Evening",p:"Evening"},131:{L:"Landscape",P:"Portrait",S:"Square"}},t.getText=function(n){var s=this.get(n),r=this.map[n],a=this.stringValues[r];return a?a[s]:String(s)},t.getAll=function(){var n={},s,r;for(s in this)Object.prototype.hasOwnProperty.call(this,s)&&(r=this.tags[s],r&&(n[r]=this.getText(r)));return n},t.getName=function(n){return this.tags[n]},function(){var n=t.tags,s=t.map||{},r;for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(s[n[r]]=Number(r))}()})})(ui);var pi={exports:{}};(function(i){(function(e){i.exports?e(k.exports,ft.exports,ve.exports):e(window.loadImage)})(function(e){var t=e.transform,n=e.requiresCanvas,s=e.requiresMetaData,r=e.transformCoordinates,a=e.getTransformedOptions;(function(h){if(!!h.global.document){var l="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAIAAwMBEQACEQEDEQH/xABRAAEAAAAAAAAAAAAAAAAAAAAKEAEBAQADAQEAAAAAAAAAAAAGBQQDCAkCBwEBAAAAAAAAAAAAAAAAAAAAABEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8AG8T9NfSMEVMhQvoP3fFiRZ+MTHDifa/95OFSZU5OzRzxkyejv8ciEfhSceSXGjS8eSdLnZc2HDm4M3BxcXwH/9k=",d=document.createElement("img");d.onload=function(){if(h.orientation=d.width===2&&d.height===3,h.orientation){var c=h.createCanvas(1,1,!0),x=c.getContext("2d");x.drawImage(d,1,1,1,1,0,0,1,1),h.orientationCropBug=x.getImageData(0,0,1,1).data.toString()!=="255,255,255,255"}},d.src=l}})(e);function f(h,l){var d=h&&h.orientation;return d===!0&&!e.orientation||d===1&&e.orientation||(!l||e.orientation)&&d>1&&d<9}function p(h,l){return h!==l&&(h===1&&l>1&&l<9||h>1&&h<9)}function o(h,l){if(l>1&&l<9)switch(h){case 2:case 4:return l>4;case 5:case 7:return l%2===0;case 6:case 8:return l===2||l===4||l===5||l===7}return!1}e.requiresCanvas=function(h){return f(h)||n.call(e,h)},e.requiresMetaData=function(h){return f(h,!0)||s.call(e,h)},e.transform=function(h,l,d,c,x){t.call(e,h,l,function(g,m){if(m){var y=e.orientation&&m.exif&&m.exif.get("Orientation");if(y>4&&y<9){var b=m.originalWidth,v=m.originalHeight;m.originalWidth=v,m.originalHeight=b}}d(g,m)},c,x)},e.getTransformedOptions=function(h,l,d){var c=a.call(e,h,l),x=d.exif&&d.exif.get("Orientation"),g=c.orientation,m=e.orientation&&x;if(g===!0&&(g=x),!p(g,m))return c;var y=c.top,b=c.right,v=c.bottom,S=c.left,w={};for(var $ in c)Object.prototype.hasOwnProperty.call(c,$)&&(w[$]=c[$]);if(w.orientation=g,(g>4&&!(m>4)||g<5&&m>4)&&(w.maxWidth=c.maxHeight,w.maxHeight=c.maxWidth,w.minWidth=c.minHeight,w.minHeight=c.minWidth,w.sourceWidth=c.sourceHeight,w.sourceHeight=c.sourceWidth),m>1){switch(m){case 2:b=c.left,S=c.right;break;case 3:y=c.bottom,b=c.left,v=c.top,S=c.right;break;case 4:y=c.bottom,v=c.top;break;case 5:y=c.left,b=c.bottom,v=c.right,S=c.top;break;case 6:y=c.left,b=c.top,v=c.right,S=c.bottom;break;case 7:y=c.right,b=c.top,v=c.left,S=c.bottom;break;case 8:y=c.right,b=c.bottom,v=c.left,S=c.top;break}if(o(g,m)){var L=y,D=b;y=v,b=S,v=L,S=D}}switch(w.top=y,w.right=b,w.bottom=v,w.left=S,g){case 2:w.right=S,w.left=b;break;case 3:w.top=v,w.right=S,w.bottom=y,w.left=b;break;case 4:w.top=v,w.bottom=y;break;case 5:w.top=S,w.right=v,w.bottom=b,w.left=y;break;case 6:w.top=b,w.right=v,w.bottom=S,w.left=y;break;case 7:w.top=b,w.right=y,w.bottom=S,w.left=v;break;case 8:w.top=S,w.right=y,w.bottom=b,w.left=v;break}return w},e.transformCoordinates=function(h,l,d){r.call(e,h,l,d);var c=l.orientation,x=e.orientation&&d.exif&&d.exif.get("Orientation");if(!!p(c,x)){var g=h.getContext("2d"),m=h.width,y=h.height,b=m,v=y;switch((c>4&&!(x>4)||c<5&&x>4)&&(h.width=y,h.height=m),c>4&&(b=y,v=m),x){case 2:g.translate(b,0),g.scale(-1,1);break;case 3:g.translate(b,v),g.rotate(Math.PI);break;case 4:g.translate(0,v),g.scale(1,-1);break;case 5:g.rotate(-.5*Math.PI),g.scale(-1,1);break;case 6:g.rotate(-.5*Math.PI),g.translate(-b,0);break;case 7:g.rotate(-.5*Math.PI),g.translate(-b,v),g.scale(1,-1);break;case 8:g.rotate(.5*Math.PI),g.translate(0,-v);break}switch(o(c,x)&&(g.translate(b,v),g.rotate(Math.PI)),c){case 2:g.translate(m,0),g.scale(-1,1);break;case 3:g.translate(m,y),g.rotate(Math.PI);break;case 4:g.translate(0,y),g.scale(1,-1);break;case 5:g.rotate(.5*Math.PI),g.scale(1,-1);break;case 6:g.rotate(.5*Math.PI),g.translate(0,-y);break;case 7:g.rotate(.5*Math.PI),g.translate(m,-y),g.scale(-1,1);break;case 8:g.rotate(-.5*Math.PI),g.translate(-m,0);break}}}})})(pi);var fi=k.exports,gi=Object.defineProperty,vi=Object.getOwnPropertyDescriptor,mi=(i,e,t,n)=>{for(var s=n>1?void 0:n?vi(e,t):e,r=i.length-1,a;r>=0;r--)(a=i[r])&&(s=(n?a(e,t,s):a(s))||s);return n&&s&&gi(e,t,s),s};let Je=class extends j(M){render(){var r,a,f,p,o,h,l,d;const i=(a=(r=A.selectedShape)==null?void 0:r.canBeClippedWith)!=null?a:!1,e=(p=(f=A.selectedShape)==null?void 0:f.thickness)!=null?p:1,t=te((h=(o=A.selectedShape)==null?void 0:o.color)!=null?h:[0,0,0]),n=te((d=(l=A.selectedShape)==null?void 0:l.fillColor)!=null?d:[0,0,0]),s=A.clipWithShapeId===A.selectedShapeId;return O`
      <div>
        <div>
          <input
            type="color"
            id="shape-color"
            name="shape-color"
            @input=${this.onColorChange}
            .value=${t}
          />
          <label for="shape-color">Shape color</label>
        </div>
        <div>
          <input
            type="color"
            id="shape-fill-color"
            name="shape-fill-color"
            @input=${this.onFillColorChange}
            .value=${n}
          />
          <label for="shape-fill-color">Shape fill color</label>
        </div>
        <button @click=${this.onDelete}>Delete shape</button>
        <input
          type="range"
          id="thickness"
          name="thickness"
          min="1"
          max="7"
          step="2"
          @input=${this.onThicknessChange}
          .value=${e}
        />
        <div>
          <label for="fill-image">Image background:</label>
          <input
            type="file"
            id="fill-image"
            name="fill-image"
            @change=${this.onFillImageChange}
          />
        </div>
        <label for="thickness">Thickness = ${e}</label>

        ${i&&O`<div>
          <input
            type="checkbox"
            id="clip-with"
            name="clip-with"
            .checked=${s}
            @change=${this.onClipWithChange}
          />
          <label for="clip-with">Clip with</label>
        </div>`}
      </div>
    `}onThicknessChange(i){const t=+i.target.value;A.changeSelectedShapeThickness(t)}onDelete(){A.deleteSelectedShape()}onColorChange(i){const e=i.target,t=Ye(e.value);A.changeSelectedShapeColor(t)}onClipWithChange(i){const e=i.target;A.clipWithSelectedShape(e.checked)}onFillColorChange(i){const e=i.target,t=Ye(e.value);A.changeSelectedShapeFillColor(t)}async onFillImageChange(i){const e=i.target;let t=await fi(e.files[0],{});const n=document.createElement("canvas"),s=n.getContext("2d");n.width=t.image.width,n.height=t.image.height,s.drawImage(t.image,0,0);const r=s.getImageData(0,0,t.image.width,t.image.height),a=new Re(r);A.changeSelectedShapeFillImage(a)}};Je=mi([U("manage-shape")],Je);var xi=Object.defineProperty,yi=Object.getOwnPropertyDescriptor,wi=(i,e,t,n)=>{for(var s=n>1?void 0:n?yi(e,t):e,r=i.length-1,a;r>=0;r--)(a=i[r])&&(s=(n?a(e,t,s):a(s))||s);return n&&s&&xi(e,t,s),s};let Ze=class extends j(M){render(){return O`
      <label for="shape-select">Select shape:</label>

      <select name="shapes" id="shape-select" @change=${this.onChange}>
        <option
          value=""
          .selected=${ue(A.selectedShapeId===void 0)}
        >
          --Drawing--
        </option>
        ${A.shapes.map(i=>O`
              <option
                value=${i.id}
                .selected=${ue(i.id===A.selectedShapeId)}
              >
                ${i.id}
              </option>
            `)}
      </select>
      <button @click=${this.onIsAddingFillPointsChange}>
        ${A.isAddingFillPoints?"Stop adding fill points":"Add fill points"}
      </button>
    `}onChange(i){const t=i.target.selectedOptions[0].value;A.selectedShapeId=t===""?void 0:t}onIsAddingFillPointsChange(){A.isAddingFillPoints=!A.isAddingFillPoints}};Ze=wi([U("pick-shape")],Ze);var bi=Object.defineProperty,Si=Object.getOwnPropertyDescriptor,ke=(i,e,t,n)=>{for(var s=n>1?void 0:n?Si(e,t):e,r=i.length-1,a;r>=0;r--)(a=i[r])&&(s=(n?a(e,t,s):a(s))||s);return n&&s&&bi(e,t,s),s};let pe=class extends j(M){render(){const i=new Blob([JSON.stringify(A.shapes.map(n=>n.serialize()))],{type:"application/json"}),e=URL.createObjectURL(i);return O`
      <a href=${e} download=${"shapes.json"}>
        <button ?disabled=${A.shapes.length===0}>Save shapes</button>
      </a>
      <input type="file" @change=${this.onFileChange} accept=".json" />
      <button
        ?disabled=${this.loadFile===void 0}
        @click=${this.loadShapes}
      >
        Load shapes
      </button>
    `}onFileChange(){var i;this.loadFile=(i=this.loadFileElement.files)==null?void 0:i[0]}loadShapes(){const i=new FileReader;i.onload=function(e){const t=e.target.result,n=JSON.parse(t).map(s=>{let r;switch(s.runtimeType){case X.runtimeType:r=new X;break;case P.runtimeType:r=new P;break;case H.runtimeType:r=new H;break;case ie.runtimeType:r=new ie;break;case se.runtimeType:r=new se;break;default:throw new Error("unrecognized shape")}return r.deserialize(s),r});A.shapes=n},i.readAsText(this.loadFile)}};ke([ht("input[type=file]")],pe.prototype,"loadFileElement",2);ke([at()],pe.prototype,"loadFile",2);pe=ke([U("save-load-shapes")],pe);var Ai=Object.defineProperty,$i=Object.getOwnPropertyDescriptor,_i=(i,e,t,n)=>{for(var s=n>1?void 0:n?$i(e,t):e,r=i.length-1,a;r>=0;r--)(a=i[r])&&(s=(n?a(e,t,s):a(s))||s);return n&&s&&Ai(e,t,s),s};let et=class extends j(M){render(){return O`
      <div>
        <div>
          <input
            type="radio"
            id="polygon"
            name="shapes"
            value="polygon"
            ?checked=${A.shapeMode==="polygon"}
            @change=${this.onChange}
          />
          <label for="polygon">polygon</label>
        </div>

        <div>
          <input
            type="radio"
            id="line"
            name="shapes"
            value="line"
            ?checked=${A.shapeMode==="line"}
            @change=${this.onChange}
          />
          <label for="line">line</label>
        </div>

        <div>
          <input
            type="radio"
            id="circle"
            name="shapes"
            value="circle"
            ?checked=${A.shapeMode==="circle"}
            @change=${this.onChange}
          />
          <label for="circle">circle</label>
        </div>

        <div>
          <input
            type="radio"
            id="capsule"
            name="shapes"
            value="capsule"
            ?checked=${A.shapeMode==="capsule"}
            @change=${this.onChange}
          />
          <label for="capsule">capsule</label>
        </div>

        <div>
          <input
            type="radio"
            id="rectangle"
            name="shapes"
            value="rectangle"
            ?checked=${A.shapeMode==="rectangle"}
            @change=${this.onChange}
          />
          <label for="rectangle">rectangle</label>
        </div>
      </div>
    `}onChange(i){A.shapeMode=i.target.value}};et=_i([U("shape-radio")],et);var Ci=Object.defineProperty,Ei=Object.getOwnPropertyDescriptor,Pi=(i,e,t,n)=>{for(var s=n>1?void 0:n?Ei(e,t):e,r=i.length-1,a;r>=0;r--)(a=i[r])&&(s=(n?a(e,t,s):a(s))||s);return n&&s&&Ci(e,t,s),s};let tt=class extends j(M){render(){return O`
      <canvas-zoom width="200" height="200">
        <app-canvas width="700" height="600" />
        <shape-radio></shape-radio>
        <save-load-shapes></save-load-shapes>
        <pick-shape></pick-shape>
        <antialias-checkbox></antialias-checkbox>
        <drawing-mode></drawing-mode>
        <button @click=${()=>A.deleteAllShapes()}>
          Remove all shapes
        </button>
        ${A.selectedShapeId?O` <manage-shape></manage-shape> `:null}
      </canvas-zoom>
    `}};tt=Pi([U("app-root")],tt);
